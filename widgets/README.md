## Оглавление
1. [Подготовка](#start)
2. [Виджеты](#widgets)
3. [Микровиджеты](#microwidgets)
4. [Если что-то не работает](#solutions)

## <a name='start'>Подготовка</a>
### Добавление скрипта
  Для начала необходимо подключить на страницу основной скрипт:
  
  ```
  <script src="//f.sravni.ru/f/apps/build/widgets/sravni-widgets.js"></script>
  ```
  Скрипт является общим для всех типов виджетов и **должен быть подключен в одном экземпляре**.
  
## <a name='widgets'>Виджеты</a>
### Подключение
  1. Проверяем подключен ли скрипт - пункт [подготовка](#start)
  2. Добавляем компонент на страницу в нужное место. 
    Виджет отобразится сдвоенным с переключателем типа **каско | осаго** *(при копировании кода не забудьте указать свой partner.id в атрибуте partner)*:

    ```
    <sravni-widget partner="partner.id"></sravni-widget>
    ```
    Допустимые параметры:
      - type - тип виджета. Доступные значения: credits, kasko, osago. По умолчанию вставляется двойной виджет автострахования, где первым отображается виджет Каско.
      - logo - отображение логотипа Сравни.ру. По умолчнию отображается. Для отключения нужно установить logo="false".
      - first - имя вкладки виджета, которая должна отобразиться первой при загрузке (только для виджета автострахования). Доступные значения: kasko, osago. По умолчанию активна вкладка с виджетом Каско
      - partner - атрибут для указания идентификатора партнёра. Необходим для фиксации переходов и расчётов с виджета в личном кабинете на [partner.sravni.ru](//partner.sravni.ru/partner/main). При отсутствии атрибута будет взято имя хоста. Например, если партнёр выкладывает виджет на внутренней странице сайта bestsite.com/news/16/07/freshnews и не указывает атрибут partner, то проверяться на предмет наличия партнёрства будет bestsite.com
      - server - сервисная переменная для указания сервера подгружаемого файла виджета. При встраивании партнёром не указывается
      - width - ширина виджета. Может задаваться в %, либо абсолютным значением. Опциональный, по умолчанию 100% ширины контейнера
      - responsive - для явного задания мобильности виджета. Опциональный. По умолчанию задает viewport, если на странице отсутствует
      - theme - тема оформления виджета
      - hide-partners - атрибут, отключающий блок партнёров под виджетом. Атрибут достаточно добавить в код виджета не присваивая никакого значения
  3. Задать ширину виджета можно, обернув его в контейнер необходимой ширины, либо указать параметр при подключении:
   
    ```
    <sravni-widget width="600" partner="partner.id"></sravni-widget>
    ```
  4. Чтобы виджет работал корректно на мобильных устройствах, на странице должен быть установлен корректный viewport:
  
    ```
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    ```

## <a name='microwidgets'>Микровиджеты</a>
### Подключение
  1. Проверяем подключен ли скрипт - пункт [подготовка](#start)
  2. Добавляем один или несколько компонентов на страницу в нужное место *(при копировании кода не забудьте указать свой partner.id в атрибуте partner)*:
  
    ```
    <sravni-micro-widget type="osago" logo="true" partner="partner.id"></sravni-micro-widget>
    ```
    Допустимые параметры
    * logo - параметр для отображения логотипа Сравни.ру. Может принимать значения true или false. Если не указан, по умолчанию принимает значение true - т.е. отображается</li>
    * size - ширина виджета. Параметр необязательный, и в случае, если не установлен, виджет примет ширину контейнера в момент вставки
    * type - тип или типы сервиса. <b>Атрибут обязателен. Если указано некорректное значение, микровиджет отображаться не будет</b>. Допустимые значения атрибута:
        - type="osago" : для ОСАГО
        - type="kasko" : для КАСКО
        - type="mantravel" : для Страхования путешествий
        - type="osago,kasko" : комбинированный с переключателем для ОСАГО и КАСКО. Первым будет отображён микровиджет ОСАГО
        - type="kasko,osago" : комбинированный с переключателем для КАСКО и ОСАГО. Первым будет отображён микровиджет КАСКО
    * partner (адрес/имя партнёра) - необязательный параметр - по умолчанию хост со страницы
    * server - адрес api сервера. Опциональный (используется для тестирования). По умолчанию https://www.sravni.ru
    * hide-partners - атрибут, отключающий блок партнёров под микровиджетом. Атрибут достаточно добавить в код микровиджета не присваивая никакого значения
    * sticker - атрибут, добавляющий стикер "реклама" к микровиджету
  3. Ограничения
    - Не следует вписывать виджет в контейнер с шириной меньше 550 пикселей без установки атрибута size
  
## <a name='solutions'>Если что-то не работает</a>
### Не вставляется тег виджета (например, в CMS Wordpress). 
  Оберните виджет Сравни в тег script следующим образом (на примере микровиджета):

  ```
  <script>document.write('<sravni-micro-widget type="mantravel"></sravni-micro-widget>')</script>
  ```
### Ваш сайт использует старые библиотеки (например mootools версии 1.2) и *микровиджет* не отображается. 
  1. Создайте статичную html страницу на вашем сайте и сделайте её доступной по прямой ссылке (sitename.ru/microwidget.html). Статичная страница должна включать только базовую разметку (html, head, body, meta).
  2. Разместите виджет на статичной странице согласно документации.
  3. Откройте редактор страницы, на которой должен отображаться виджет и добавьте следующий код:
  
    ```
    <iframe frameborder="0" src="ссылка/на/статичную/страницу.html" style="width:700px; height: 400px;"></iframe>
    ```
  4. Укажите ссылку на вашу статичную страницу из п. 1 в атрибут src и установите необходимую ширину и высоту
  
  *Примечание* 
    Если внутри тега iframe не умещаются календари (для туристического микровиджета), убрать их можно установкой атрибута field-datepicker="false", например:

    ```
    <sravni-micro-widget type="mantravel" logo="true" partner="partner.id" field-datepicker="false"></sravni-micro-widget>
    ```
